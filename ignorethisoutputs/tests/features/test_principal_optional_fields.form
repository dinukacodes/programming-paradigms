form PrincipalOptionalFieldTest {
    section PrincipalOptionalTests {
        field basic_principaloptional: principal_optional required;
        
        field field_principal: principal_optional {
            required;
            default = true;
        }
        
        field section_principal: principal_optional {
            optional;
            default = false;
        }
        
        field group_principal: principal_optional {
            required;
            default = true;
        }
    }

    validate {
        if basic_principaloptional == 0 { error "Principal/Optional selection is required."; }
        
        if field_principal == 0 { error "Field principal status is required."; }
        if !field_principal { error "Field must be principal."; }
        
        if group_principal == 0 { error "Group principal status is required."; }
    }
} 