form CurrencyFieldTest {
    section CurrencyTests {
        field basic_currency: currency required;
        
        field usd_amount: currency {
            required;
            default = "$1,234.56";
        }
        
        field eur_amount: currency {
            optional;
            default = "€2,345.67";
        }
        
        field gbp_amount: currency {
            required;
            default = "£3,456.78";
        }
    }

    validate {
        if basic_currency == 0 { error "Currency amount is required."; }
        if !basic_currency.matches("^[$€£][0-9,]+\\.[0-9]{2}$") { error "Invalid currency format."; }
        
        if usd_amount == 0 { error "USD amount is required."; }
        if !usd_amount.matches("^\\$[0-9,]+\\.[0-9]{2}$") { error "Invalid USD format."; }
        
        if eur_amount != 0 && !eur_amount.matches("^€[0-9,]+\\.[0-9]{2}$") { error "Invalid EUR format."; }
        
        if gbp_amount == 0 { error "GBP amount is required."; }
        if !gbp_amount.matches("^£[0-9,]+\\.[0-9]{2}$") { error "Invalid GBP format."; }
    }
} 